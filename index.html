<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Shetia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Shetia">
<meta property="og:url" content="https://shetia.github.io/blog/index.html">
<meta property="og:site_name" content="Shetia">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="shetia">
<meta name="twitter:card" content="summary">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/blog/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Shetia</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">主页</a>
        
          <a class="main-nav-link" href="/blog/archives">档案</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://shetia.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-快速排序" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/07/08/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/" class="article-date">
  <time datetime="2020-07-08T08:21:53.000Z" itemprop="datePublished">2020-07-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/07/08/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/">快速排序</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>快速排序是处理大数据集最快的排序算法之一。它是一种分而治之的算法，通过递归的方式将数据依次分解为包含较小元素和较大元素的不同子序列。该算法不断重复这个步骤直到所有数据都是有序的。<br>这个算法首先要在列表中选择一个元素作为基准值（pivot）。数据排序围绕基准值进行，将列表中小于基准值的元素移到数组的底部，将大于基准值的元素移到数组的顶部。</p>
<h3 id="基础版-lt-lt-数据结构与算法JavaScript描述-gt-gt-P163"><a href="#基础版-lt-lt-数据结构与算法JavaScript描述-gt-gt-P163" class="headerlink" title="基础版(&lt;&lt;数据结构与算法JavaScript描述&gt;&gt;P163)"></a>基础版(&lt;&lt;数据结构与算法JavaScript描述&gt;&gt;P163)</h3><p>(1) 选择一个基准元素，将列表分隔成两个子序列；<br>(2) 对列表重新排序，将所有小于基准值的元素放在基准值的前面，所有大于基准值的元素放在基准值的后面；<br>(3) 分别对较小元素的子序列和较大元素的子序列递归调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">qsort</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(arr.length &lt; <span class="number">2</span>) <span class="keyword">return</span> arr</span><br><span class="line">  <span class="keyword">let</span> p = arr[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">let</span> left = []</span><br><span class="line">  <span class="keyword">let</span> right = []</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &gt; p) &#123;</span><br><span class="line">      right.push(arr[i])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      left.push(arr[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [...qsort(left), p, ...qsort(right)]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**     -------------测试-----------------        */</span></span><br><span class="line"><span class="keyword">let</span> list = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">  list.push(~~(<span class="built_in">Math</span>.random() * <span class="number">100</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(list, <span class="string">'开始'</span>)</span><br><span class="line">start = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line"><span class="keyword">let</span> list1 = qsort(list)</span><br><span class="line">end = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line"><span class="built_in">console</span>.log(list1, <span class="string">'耗时:'</span> + (end - start) + <span class="string">'ms'</span>)</span><br></pre></td></tr></table></figure>
<p>然而，选择数组的第一项（最左项）。研究表明对于几乎已排序的数组，这不是一个好的选择，它将导致该算法的最差表现。另外一种方式是随机选择一个数组项或是选择中间项。</p>
<h3 id="优化版-lt-lt-学习JavaScript数据结构与算法（第2版-gt-gt-P179"><a href="#优化版-lt-lt-学习JavaScript数据结构与算法（第2版-gt-gt-P179" class="headerlink" title="优化版(&lt;&lt;学习JavaScript数据结构与算法（第2版)&gt;&gt; P179)"></a>优化版(&lt;&lt;学习JavaScript数据结构与算法（第2版)&gt;&gt; P179)</h3><p>(1) 首先，从数组中选择中间一项作为主元。<br>(2) 创建两个指针，左边一个指向数组第一个项，右边一个指向数组最后一个项。移动左指针直到我们找到一个比主元大的元素，接着，移动右指针直到找到一个比主元小的元素，然后交换它们，重复这个过程，直到左指针超过了右指针。这个过程将使得比主元小的值都排在主元之前，而比主元大的值都排在主元之后。这一步叫作划分操作。<br>(3) 接着，算法对划分后的小数组（较主元小的值组成的子数组，以及较主元大的值组成的子数组）重复之前的两个步骤，直至数组已完全排序。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">qsort</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> partition = <span class="function"><span class="keyword">function</span>(<span class="params">arr, left, right</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> p = arr[left + ((right - left) &gt;&gt; <span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">let</span> i = left, j = right</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= j)&#123;</span><br><span class="line">      <span class="keyword">while</span>(arr[i] &lt; p) i++</span><br><span class="line">      <span class="keyword">while</span>(arr[j] &gt; p) j--</span><br><span class="line">      <span class="keyword">if</span>(i &lt;= j) &#123;</span><br><span class="line">        [arr[i], arr[j]] = [arr[j], arr[i]]</span><br><span class="line">        i++</span><br><span class="line">        j--</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> quick = <span class="function"><span class="keyword">function</span>(<span class="params">arr, left, right</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &gt; <span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">let</span> index = partition(arr, left, right)</span><br><span class="line">      <span class="keyword">if</span>(left &lt; index - <span class="number">1</span>) quick(arr, left, index - <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span>(index &lt; right) quick(arr, index, right)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  quick(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**     -------------测试-----------------        */</span></span><br><span class="line"><span class="keyword">let</span> list = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">  list.push(~~(<span class="built_in">Math</span>.random() * <span class="number">100</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(list, <span class="string">'开始'</span>)</span><br><span class="line">start = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">qsort(list)</span><br><span class="line">end = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line"><span class="built_in">console</span>.log(list, <span class="string">'耗时:'</span> + (end - start) + <span class="string">'ms'</span>)</span><br></pre></td></tr></table></figure>

<h3 id="原型版"><a href="#原型版" class="headerlink" title="原型版"></a>原型版</h3><p>Mozilla/Firefox : 归并排序<br>Webkit ：底层实现用了 C++ 库中的 qsort() 方法<br>V8 引擎 sort 函数只给出了两种排序 InsertionSort 和 QuickSort，数量小于10的数组使用 InsertionSort，比10大的数组则使用 QuickSort。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (to - <span class="keyword">from</span> &lt;= <span class="number">10</span>) &#123;</span><br><span class="line">  InsertionSort(a, <span class="keyword">from</span>, to);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.qsort = <span class="function"><span class="keyword">function</span> (<span class="params">compareFn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> list = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">let</span> defaultCompare = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a === b) <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> a &lt; b ? <span class="number">-1</span> : <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  compareFn = compareFn || defaultCompare</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> compareFn !== <span class="string">'function'</span>) <span class="keyword">throw</span> <span class="built_in">Error</span>(compareFn + <span class="string">'不是一个函数'</span>)</span><br><span class="line">  <span class="keyword">let</span> partition = <span class="function"><span class="keyword">function</span>(<span class="params">arr, left, right</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> p = arr[left + ((right - left) &gt;&gt; <span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">let</span> i = left, j = right</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= j)&#123;</span><br><span class="line">      <span class="keyword">while</span>(compareFn(arr[i], p) &lt; <span class="number">0</span>) i++</span><br><span class="line">      <span class="keyword">while</span>(compareFn(arr[j], p) &gt; <span class="number">0</span>) j--</span><br><span class="line">      <span class="keyword">if</span>(i &lt;= j) &#123;</span><br><span class="line">        [arr[i], arr[j]] = [arr[j], arr[i]]</span><br><span class="line">        i++</span><br><span class="line">        j--</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> quick = <span class="function"><span class="keyword">function</span>(<span class="params">arr, left, right</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length &gt; <span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">let</span> index = partition(arr, left, right)</span><br><span class="line">      <span class="keyword">if</span>(left &lt; index - <span class="number">1</span>) quick(arr, left, index - <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">if</span>(index &lt; right) quick(arr, index, right)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  quick(list, <span class="number">0</span>, list.length - <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**     -------------测试-----------------        */</span></span><br><span class="line"><span class="keyword">let</span> list = []</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)&#123;</span><br><span class="line">  <span class="keyword">let</span> item = ~~(<span class="built_in">Math</span>.random() * <span class="number">100</span>)</span><br><span class="line">  list.push(item)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(list, <span class="string">'开始'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// let start = new Date().getTime()</span></span><br><span class="line"><span class="comment">// list.sort((a, b) =&gt; a - b)</span></span><br><span class="line"><span class="comment">// let end = new Date().getTime()</span></span><br><span class="line"><span class="comment">// console.log('耗时:' + (end - start) + 'ms')</span></span><br><span class="line"></span><br><span class="line">start = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">list.qsort()</span><br><span class="line">end = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'耗时:'</span> + (end - start) + <span class="string">'ms'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(list, <span class="string">'结果'</span>)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/07/08/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/" data-id="ckce3h01g0004oki24keegcvs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue组件发布npm" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/vue%E7%BB%84%E4%BB%B6%E5%8F%91%E5%B8%83npm/" class="article-date">
  <time datetime="2020-06-28T07:56:10.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/vue%E7%BB%84%E4%BB%B6%E5%8F%91%E5%B8%83npm/">vue组件发布npm</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <meta name="referrer" content="no-referrer">


<h2 id="vue组件发布npm整个流程"><a href="#vue组件发布npm整个流程" class="headerlink" title="vue组件发布npm整个流程"></a>vue组件发布npm整个流程</h2><p>记录一下组件发布流程，参考<a href="http://www.rxshc.com/180.html" target="_blank" rel="noopener">Vue cli3 库模式搭建组件库并发布到 npm</a></p>
<h3 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h3><p>首先，我们从零开始搭建一个vue项目，以vue-cli3 来搭建。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create my-project</span><br></pre></td></tr></table></figure>
<p>长这样子的：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/9/26/16d6b543812fabb0?w=1024&h=768&f=png&s=94536" alt></p>
<h3 id="调整目录"><a href="#调整目录" class="headerlink" title="调整目录"></a>调整目录</h3><p>安装项目之后我们来修改一下目录结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">...</span><br><span class="line">|-- examples      &#x2F;&#x2F; 原 src 目录，改成 examples 用作示例展示</span><br><span class="line">|-- packages      &#x2F;&#x2F; 新增 packages 用于编写存放组件</span><br><span class="line">...</span><br><span class="line">.</span><br></pre></td></tr></table></figure>

<p>修改之后，运行项目我们会发现报错了，那是因为目录结构改了，还有就是packges这个文件夹是我们新增的，webpack无法获取编译，我们需要在webpack里加上。</p>
<p>我们会新建一个vue.config.js的配置文件，这个vue-cli3提供的一个可选配置文件，我们可以在里面配置整个项目所有的webpack配置。<br>我们可以直接去 <a href="https://cli.vuejs.org/zh/config/#pages" target="_blank" rel="noopener">vue-cli3的配置</a> 复制过来,而 <a href="https://cli.vuejs.org/zh/guide/webpack.html#%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C-%E9%AB%98%E7%BA%A7" target="_blank" rel="noopener">chainWebpack</a> 会给我们提供链式操作</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue-config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// 修改 src 目录 为 examples 目录</span></span><br><span class="line">  pages: &#123;</span><br><span class="line">    index: &#123;</span><br><span class="line">      <span class="comment">// page 的入口</span></span><br><span class="line">      entry: <span class="string">'examples/main.js'</span>,   <span class="comment">// 把src 修改为examples</span></span><br><span class="line">      <span class="comment">// 模板来源</span></span><br><span class="line">      template: <span class="string">'public/index.html'</span>,</span><br><span class="line">      <span class="comment">// 在 dist/index.html 的输出</span></span><br><span class="line">      filename: <span class="string">'index.html'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 扩展 webpack 配置，使 packages 加入编译</span></span><br><span class="line">  <span class="comment">/* chainWebpack 是一个函数，会接收一个基于 webpack-chain 的 ChainableConfig 实例。</span></span><br><span class="line"><span class="comment">  允许对内部的 webpack 配置进行更细粒度的修改。</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config.module</span><br><span class="line">      .rule(<span class="string">'js'</span>)</span><br><span class="line">      .include</span><br><span class="line">        .add(__dirname + <span class="string">'packages'</span>)  <span class="comment">// 注意这里需要绝对路径，所有要拼接__dirname</span></span><br><span class="line">        .end()</span><br><span class="line">      .use(<span class="string">'babel'</span>)</span><br><span class="line">        .loader(<span class="string">'babel-loader'</span>)</span><br><span class="line">        .tap(<span class="function"><span class="params">options</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 修改它的选项...</span></span><br><span class="line">          <span class="keyword">return</span> options</span><br><span class="line">        &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上就是基本的配置，接下来我们就开始创建一个组件</p>
<h3 id="编写组件"><a href="#编写组件" class="headerlink" title="编写组件"></a>编写组件</h3><p>这里我就以一个按钮组件来做尝试。<br>在之前我们新建的 packages 目录中新建 comColorButton 文件夹和index.js文件，然后再在comColorButton文件夹里，创建src文件夹和index.js文件，目录结构如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|——</span><br><span class="line">|——packages</span><br><span class="line">|   |——index.js</span><br><span class="line">|   |——comColorButton</span><br><span class="line">|      |——index.js</span><br><span class="line">|      |——src</span><br><span class="line">|         |——color-button.vue</span><br><span class="line">|——</span><br></pre></td></tr></table></figure>
<p>这是color-button.vue的内容</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- color-button.vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"color-button"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">"[type, disabled?'disabled':'']"</span> <span class="attr">:disabled</span>=<span class="string">"disabled"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name:<span class="string">'ComColorButton'</span>,</span></span><br><span class="line">  props:&#123;</span><br><span class="line">      type:&#123;</span><br><span class="line"><span class="javascript">      type:<span class="built_in">String</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>:<span class="string">'primary'</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">      disabled:&#123;</span><br><span class="line"><span class="javascript">      type:<span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">default</span>:<span class="literal">false</span></span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;, </span><br><span class="line">  data () &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">'scss'</span>&gt;</span></span><br><span class="line">$pColor:#333;</span><br><span class="line">$sColor:#0db677;</span><br><span class="line">$wColor:orange;</span><br><span class="line">$dColor:red;</span><br><span class="line">$disabledColor:gray;</span><br><span class="line"><span class="css"><span class="selector-class">.color-button</span>&#123;</span></span><br><span class="line">  display: inline-block;</span><br><span class="line"><span class="css">  <span class="selector-tag">margin-right</span><span class="selector-pseudo">:10px</span>;</span></span><br><span class="line">  button&#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line"><span class="css">    <span class="selector-tag">padding</span><span class="selector-pseudo">:10px</span> 20<span class="selector-tag">px</span>;</span></span><br><span class="line">    border:2px solid $pColor;</span><br><span class="line"><span class="css">    <span class="selector-tag">background</span>:<span class="selector-id">#fff</span>;</span></span><br><span class="line">    font-size: 16px;</span><br><span class="line"><span class="css">    <span class="selector-tag">width</span><span class="selector-pseudo">:auto</span>;</span></span><br><span class="line">    cursor: pointer;</span><br><span class="line"><span class="css">    <span class="selector-tag">transition</span><span class="selector-pseudo">:all</span> 0<span class="selector-class">.5s</span>;</span></span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line">      box-shadow: 100px 0px 0px 0px $pColor inset;</span><br><span class="line"><span class="css">      <span class="selector-tag">color</span>:<span class="selector-id">#fff</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-class">.success</span>&#123;</span></span><br><span class="line">      border:2px solid $sColor;</span><br><span class="line">      color: $sColor;</span><br><span class="line"><span class="css">      &amp;<span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line">        box-shadow: 100px 0px 0px 0px $sColor inset;</span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>:<span class="selector-id">#fff</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-class">.warning</span>&#123;</span></span><br><span class="line">      border:2px solid $wColor;</span><br><span class="line">      color: $wColor;</span><br><span class="line"><span class="css">      &amp;<span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line">        box-shadow: 100px 0px 0px 0px $wColor inset;</span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>:<span class="selector-id">#fff</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-class">.danger</span>&#123;</span></span><br><span class="line">      border:2px solid $dColor;</span><br><span class="line">      color: $dColor;</span><br><span class="line"><span class="css">      &amp;<span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line">        box-shadow: 100px 0px 0px 0px $dColor inset;</span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>:<span class="selector-id">#fff</span>;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    &amp;<span class="selector-class">.disabled</span>&#123;</span></span><br><span class="line">      border:2px solid $disabledColor;</span><br><span class="line">      color: $disabledColor;</span><br><span class="line"><span class="css">      <span class="selector-tag">cursor</span><span class="selector-pseudo">:not-allowed</span> ;</span></span><br><span class="line"><span class="css">      &amp;<span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">box-shadow</span><span class="selector-pseudo">:none</span>;</span></span><br><span class="line">        color: $disabledColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是comColorButton文件夹内的index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入组件，组件必须声明 name</span></span><br><span class="line"><span class="keyword">import</span> ComColorButton <span class="keyword">from</span> <span class="string">'./src/color-button.vue'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 为组件提供 install 安装方法，供按需引入</span></span><br><span class="line">ComColorButton.install = <span class="function"><span class="keyword">function</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  Vue.component(ComColorButton.name, ComColorButton)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认导出组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ComColorButton</span><br></pre></td></tr></table></figure>

<p>这是 packages 文件夹内的index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ComColorButton <span class="keyword">from</span> <span class="string">'./comColorButton'</span></span><br><span class="line"><span class="comment">// 存储组件列表</span></span><br><span class="line"><span class="keyword">const</span> components = [</span><br><span class="line">  ComColorButton</span><br><span class="line">] </span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">  定义install 方法，接收Vue作为参数，如果使用use注册插件，则所有的组件都将被注册</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> install = <span class="function"><span class="keyword">function</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 判断是否安装</span></span><br><span class="line">  <span class="keyword">if</span>(install.installed)&#123;<span class="keyword">return</span>&#125;</span><br><span class="line">  <span class="comment">// 遍历所有组件</span></span><br><span class="line">  components.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    Vue.component(item.name,item)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 判断是否引入文件</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span> &amp;&amp; <span class="built_in">window</span>.Vue)&#123;</span><br><span class="line">  install(<span class="built_in">window</span>.Vue)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  install,</span><br><span class="line">  ComColorButton</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上之后，组件就写完了，接下来就是引入组件了</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* main.js */</span></span><br><span class="line"><span class="comment">// 导入组件库</span></span><br><span class="line"><span class="keyword">import</span> ComColorButton <span class="keyword">from</span> <span class="string">'./../packages/index'</span></span><br><span class="line"><span class="comment">// 注册组件库</span></span><br><span class="line">Vue.use(ComColorButton)</span><br></pre></td></tr></table></figure>

<p>使用组件库</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com-color-button</span> <span class="attr">type</span>=<span class="string">"success"</span> <span class="attr">:disabled</span>=<span class="string">"false"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">com-color-button</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">com-color-button</span> <span class="attr">:disabled</span>=<span class="string">"true"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">com-color-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们可以看到效果：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/9/26/16d6b4b00ee600ff?w=818&h=632&f=png&s=22950" alt></p>
<h3 id="发布npm-方便直接在项目中引用"><a href="#发布npm-方便直接在项目中引用" class="headerlink" title="发布npm 方便直接在项目中引用"></a>发布npm 方便直接在项目中引用</h3><p>到此为止我们一个完整的组件库已经开发完成了，接下来就是发布到 npm 以供后期使用</p>
<h4 id="1、package-json-中新增一条编译为库的命令"><a href="#1、package-json-中新增一条编译为库的命令" class="headerlink" title="1、package.json 中新增一条编译为库的命令"></a>1、package.json 中新增一条编译为库的命令</h4><p>在库模式中，Vue是外置的，这意味着即使在代码中引入了 Vue，打包后的文件也是不包含Vue的。</p>
<p>以下我们在 scripts 中新增一条命令 npm run lib</p>
<ul>
<li>–target: 构建目标，默认为应用模式。这里修改为 lib 启用库模式。</li>
<li>–dest : 输出目录，默认 dist。这里我们改成 lib</li>
<li>[entry]: 最后一个参数为入口文件，默认为 src/App.vue。这里我们指定编译 packages/ 组件库目录。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    "lib": "vue-cli-service build --target lib --name vcolorpicker --dest lib packages/index.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行编译库命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run lib</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2019/9/26/16d6b5af7920d49a?w=661&h=454&f=png&s=55267" alt><br>之后我们就可以看到会生成一个文件夹lib包含很多文件，长这样子的：</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/9/26/16d6b4d68c9e8584?w=1080&h=953&f=png&s=179381" alt></p>
<h4 id="2、配置-package-json-文件中发布到-npm-的字段"><a href="#2、配置-package-json-文件中发布到-npm-的字段" class="headerlink" title="2、配置 package.json 文件中发布到 npm 的字段"></a>2、配置 package.json 文件中发布到 npm 的字段</h4><ul>
<li>name: 包名，该名字是唯一的。可在 npm 官网搜索名字，如果存在则需换个名字。</li>
<li>version: 版本号，每次发布至 npm 需要修改版本号，不能和历史版本号相同。</li>
<li>description: 描述。</li>
<li>main: 入口文件，该字段需指向我们最终编译后的包文件。</li>
<li>keyword：关键字，以空格分离希望用户最终搜索的词。</li>
<li>author：作者</li>
<li>private：是否私有，需要修改为 false 才能发布到 npm</li>
<li>license： 开源协议<br>以下为参考设置<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"name": "com-color-button",</span><br><span class="line"> "version": "0.1.3",</span><br><span class="line"> "description": "基于 Vue 的按钮",</span><br><span class="line"> "main": "lib/comColorButton.umd.min.js",</span><br><span class="line"> "keyword": "colorButton button color",</span><br><span class="line"> "private": false,</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="3、添加-npmignore-文件，设置忽略发布文件"><a href="#3、添加-npmignore-文件，设置忽略发布文件" class="headerlink" title="3、添加 .npmignore 文件，设置忽略发布文件"></a>3、添加 .npmignore 文件，设置忽略发布文件</h4><p>我们发布到 npm 中，只有编译后的 lib 目录、package.json、README.md才是需要被发布的。所以我们需要设置忽略目录和文件。<br>和 .gitignore 的语法一样，具体需要提交什么文件，看各自的实际情况。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 忽略目录</span><br><span class="line">examples&#x2F;</span><br><span class="line">packages&#x2F;</span><br><span class="line">public&#x2F;</span><br><span class="line"></span><br><span class="line"># 忽略指定文件</span><br><span class="line">vue.config.js</span><br><span class="line">babel.config.js</span><br><span class="line">*.map</span><br></pre></td></tr></table></figure>
<h4 id="4、登录到-npm"><a href="#4、登录到-npm" class="headerlink" title="4、登录到 npm"></a>4、登录到 npm</h4><p>首先需要到 npm 上注册一个账号,注意验证邮箱，不然之后会发布不了。<br>如果配置了淘宝镜像，先设置回npm镜像</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry http:&#x2F;&#x2F;registry.npmjs.org</span><br></pre></td></tr></table></figure>
<p>然后在终端执行登录命令，输入用户名、密码、邮箱即可登录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm login</span><br></pre></td></tr></table></figure>

<h4 id="5、发布到-npm"><a href="#5、发布到-npm" class="headerlink" title="5、发布到 npm"></a>5、发布到 npm</h4><p>执行发布命令，发布组件到 npm</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<p><img src="https://user-gold-cdn.xitu.io/2019/9/26/16d6b5bc7ab28000?w=661&h=514&f=png&s=92420" alt><br>这里如果还没有验证邮箱的话话报个，需要验证邮箱的错误。去npm上验证邮箱即可，它会在页面顶部弹出个需要验证邮箱的提示。</p>
<h4 id="6、发布成功"><a href="#6、发布成功" class="headerlink" title="6、发布成功"></a>6、发布成功</h4><p>发布成功后稍等几分钟，可查看自己npm账号的packages，也可在 npm 官网搜索。 </p>
<p>去npm查看，我们可以packages下看到发布成功了，如下图：<br><img src="https://user-gold-cdn.xitu.io/2019/9/26/16d6b4f823ed90c6?w=1906&h=942&f=png&s=85791" alt></p>
<h4 id="7、使用新发布的组件库"><a href="#7、使用新发布的组件库" class="headerlink" title="7、使用新发布的组件库"></a>7、使用新发布的组件库</h4><p>安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install com-color-button -S</span><br></pre></td></tr></table></figure>

<p> 引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--main.js--&gt;</span><br><span class="line"><span class="keyword">import</span> ComColorButton <span class="keyword">from</span> <span class="string">'com-color-button'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'com-color-button/lib/comColorButton.css'</span></span><br><span class="line">Vue.use(ComColorButton)</span><br></pre></td></tr></table></figure>

<p>组件中使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">com-color-button</span> <span class="attr">type</span>=<span class="string">"success"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">com-color-button</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>到此就全部结束了，这都是亲自实践过的，可用。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/vue%E7%BB%84%E4%BB%B6%E5%8F%91%E5%B8%83npm/" data-id="ckce3h01m000hoki21g7uf00x" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-柯里化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/%E6%9F%AF%E9%87%8C%E5%8C%96/" class="article-date">
  <time datetime="2020-06-28T07:49:09.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/%E6%9F%AF%E9%87%8C%E5%8C%96/">柯里化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="简单理解函数柯里化"><a href="#简单理解函数柯里化" class="headerlink" title="简单理解函数柯里化"></a>简单理解函数柯里化</h2><h3 id="柯里化的定义"><a href="#柯里化的定义" class="headerlink" title="柯里化的定义"></a>柯里化的定义</h3><p> 接收一部分参数，返回一个函数接收剩余参数，接收足够参数后，执行原函数。</p>
<h3 id="什么是柯里化"><a href="#什么是柯里化" class="headerlink" title="什么是柯里化"></a>什么是柯里化</h3><p>柯里化, 即 Currying 的音译。Currying 是编译原理层面实现多参函数的一个技术。<br> 我们在编码的过程中，本质工作就是将复杂的问题分解成多个可编程的小问题。<br>Currying 就是将接收多个参数的函数转变为一系列接收单一参数的函数，并且返回接收余下参数的函数。<br>举例来说：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//一个接收4个参数的函数</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params">a,b,c,d</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log([a,b,c,d]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//假设我们有一个转换函数 curry</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//生成一个柯里化函数</span></span><br><span class="line"><span class="keyword">let</span> demo = curry(fn);</span><br><span class="line"></span><br><span class="line">demo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>); <span class="comment">// [1,2,3,4]   </span></span><br><span class="line">demo(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>); <span class="comment">// [1,2,3,4]   </span></span><br><span class="line">demo(<span class="number">1</span>,<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>); <span class="comment">// [1,2,3,4]   </span></span><br><span class="line">demo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)(<span class="number">4</span>); <span class="comment">// [1,2,3,4]</span></span><br></pre></td></tr></table></figure>
<p>注意：在编译原理层面的柯里化，一次只能传递给函数一个参数；而我们在编程过程中实际使用的柯里化函数，是可以传递给函数一个或多个参数</p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>接下来，我们来思考如何实现 curry 函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn,...params</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> _args = [...params,...args];</span><br><span class="line">        <span class="keyword">if</span>(_args.length &gt;= fn.length)&#123;</span><br><span class="line">          <span class="comment">// 当接收到的参数大于或等于fn中的参数时，直接调用fn</span></span><br><span class="line">            <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>,_args);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="comment">// 当接收到的参数小于fn中的参数时，继续调用curry</span></span><br><span class="line">            <span class="keyword">return</span> curry.call(<span class="keyword">this</span>,fn,..._args);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一个接收4个参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a,b,c,d</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log([a,b,c,d])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> demo = curry(fn)</span><br><span class="line"></span><br><span class="line">demo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>);         <span class="comment">// print: [1,2,3,4]</span></span><br><span class="line">demo(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>);       <span class="comment">// print: [1,2,3,4]</span></span><br><span class="line">demo(<span class="number">1</span>,<span class="number">2</span>)(<span class="number">3</span>,<span class="number">4</span>);        <span class="comment">// print: [1,2,3,4]</span></span><br><span class="line">demo(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>);      <span class="comment">// print: [1,2,3,4]</span></span><br></pre></td></tr></table></figure>
<h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p>我们之前完成的 curry 函数，依赖与原函数的形参个数，只有接受的总参数个数大于等于原函数的形参个数时，才会调用原函数。</p>
<p>那么如果我们希望传入的参数个数在不等于原函数的形参个数的时候，原函数依然能执行，我们该怎么做呢？很简单，将 curry 函数修改一下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 相比多传入一个len参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn,len = fn.length,...params</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> _args = [...params,...args];</span><br><span class="line">        <span class="keyword">if</span>(_args.length &gt;= len)&#123;</span><br><span class="line">            <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>,_args);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> curry.call(<span class="keyword">this</span>,fn,len,..._args);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//一个接收4个参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a,b,c,d</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log([a,b,c,d]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接收三个参数后，执行原函数</span></span><br><span class="line"><span class="keyword">let</span> demo = curry(fn,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">demo(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>); <span class="comment">// [1,2,3,undefined]</span></span><br></pre></td></tr></table></figure>
<h3 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h3><p>来看一个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示意而已</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">type, url, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    xhr.open(type, url, <span class="literal">true</span>);</span><br><span class="line">    xhr.send(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 虽然 ajax 这个函数非常通用，但在重复调用的时候参数冗余</span></span><br><span class="line">ajax(<span class="string">'POST'</span>, <span class="string">'www.test.com'</span>, <span class="string">"name=kevin"</span>)</span><br><span class="line">ajax(<span class="string">'POST'</span>, <span class="string">'www.test2.com'</span>, <span class="string">"name=kevin"</span>)</span><br><span class="line">ajax(<span class="string">'POST'</span>, <span class="string">'www.test3.com'</span>, <span class="string">"name=kevin"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用 curry</span></span><br><span class="line"><span class="keyword">var</span> ajaxCurry = curry(ajax);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以 POST 类型请求数据</span></span><br><span class="line"><span class="keyword">var</span> post = ajaxCurry(<span class="string">'POST'</span>);</span><br><span class="line">post(<span class="string">'www.test.com'</span>, <span class="string">"name=kevin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以 POST 类型请求来自于 www.test.com 的数据</span></span><br><span class="line"><span class="keyword">var</span> postFromTest = post(<span class="string">'www.test.com'</span>);</span><br><span class="line">postFromTest(<span class="string">"name=kevin"</span>);</span><br></pre></td></tr></table></figure>
<p>curry 的这种用途可以理解为：参数复用。本质上是降低通用性，提高适用性。</p>
<p>可是即便如此，是不是依然感觉没什么用呢？</p>
<p>再来看一个例子：</p>
<p>假设我们有这样一段数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> personList = [&#123;<span class="attr">name</span>: <span class="string">'bingshan'</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">'group'</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>现在我们需要将 personList 中的所有 name 值提取出来，放入一个变量 names 中。</p>
<p>通常情况下，我们会这样来实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> names = list.map(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> item.name;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>然而，使用柯里化的思想，我们会这样实现：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> prop = curry(<span class="function"><span class="keyword">function</span>(<span class="params">key,obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj[key];</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> names = person.map(prop(<span class="string">'name'</span>));</span><br></pre></td></tr></table></figure>
<p>看到这个例子，可能很多人会说，使用柯里化的思想之后，变得更麻烦了。</p>
<p>其实不是的，prop 函数只需要创建一次，以后每次获取数组对象中的元素的时候，都可以拿来直接使用的，我们是可以将其看做是一个工具函数，与我们的业务代码无关。</p>
<p>那么此时，我们的业务代码就只剩一行了，并且看起来比传统书写方式更加直观易懂</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = person.map(prop(<span class="string">'name'</span>));</span><br></pre></td></tr></table></figure>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p> lodash 不仅提供了 curry 工具函数，还提供了参数占位符的玩法：<br> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span></span><br><span class="line"><span class="keyword">let</span> demo = <span class="function"><span class="keyword">function</span>(<span class="params">a,b,c,d</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log([a,b,c,d]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> _demo = _.curry(demo);</span><br><span class="line">_demo(_,<span class="number">2</span>)(<span class="number">1</span>,_,<span class="number">4</span>)(<span class="number">3</span>) <span class="comment">// [1,2,3,4]</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/%E6%9F%AF%E9%87%8C%E5%8C%96/" data-id="ckce3h01w000noki290v5dkm4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-css技巧" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/css%E6%8A%80%E5%B7%A7/" class="article-date">
  <time datetime="2020-06-28T07:47:28.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/css%E6%8A%80%E5%B7%A7/">css技巧</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>使用技巧会让人变的越来越懒，没错，我就是想让你变懒。下面是收集的CSS高级技巧，希望你懒出境界。</p>
<h3 id="1-黑白图像"><a href="#1-黑白图像" class="headerlink" title="1. 黑白图像"></a>1. 黑白图像</h3><p>这段代码会让你的彩色照片显示为黑白照片，是不是很酷？</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span><span class="selector-class">.desaturate</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">-webkit-filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">-moz-filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">-ms-filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">-o-filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-使用-not-在菜单上应用-取消应用边框"><a href="#2-使用-not-在菜单上应用-取消应用边框" class="headerlink" title="2. 使用 :not() 在菜单上应用/取消应用边框"></a>2. 使用 :not() 在菜单上应用/取消应用边框</h3><p>先给每一个菜单项添加边框</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* add border */</span></span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后再除去最后一个元素</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// remove border /</span><br><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="attribute">border-right</span>: none;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以直接使用 :not() 伪类来应用元素：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">li</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:last-child)</span> &#123;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样代码就干净，易读，易于理解了。</p>
<p>当然，如果你的新元素有兄弟元素的话，也可以使用通用的兄弟选择符（~）：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.nav</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first-child</span> ~ <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-页面顶部阴影"><a href="#3-页面顶部阴影" class="headerlink" title="3. 页面顶部阴影"></a>3. 页面顶部阴影</h3><p>下面这个简单的 CSS3 代码片段可以给网页加上漂亮的顶部阴影效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">8</span>);</span><br><span class="line">    <span class="attribute">-moz-box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">8</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">8</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-给-body-添加行高"><a href="#4-给-body-添加行高" class="headerlink" title="4. 给 body 添加行高"></a>4. 给 body 添加行高</h3><p>你不需要分别添加 line-height 到每个p,h标记等。只要添加到 body 即可：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样文本元素就可以很容易地从 body 继承。</p>
<h3 id="5-所有一切都垂直居中"><a href="#5-所有一切都垂直居中" class="headerlink" title="5. 所有一切都垂直居中"></a>5. 所有一切都垂直居中</h3><p>要将所有元素垂直居中，太简单了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-align-items</span>: center;</span><br><span class="line">    <span class="attribute">-ms-flex-align</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看，是不是很简单。</p>
<p>注意：在IE11中要小心flexbox</p>
<h3 id="6-逗号分隔的列表"><a href="#6-逗号分隔的列表" class="headerlink" title="6. 逗号分隔的列表"></a>6. 逗号分隔的列表</h3><p>让HTML列表项看上去像一个真正的，用逗号分隔的列表：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span><span class="selector-pseudo">:not(</span><span class="selector-pseudo">:last-child)</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">","</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对最后一个列表项使用 :not() 伪类。</p>
<h3 id="7-使用负的-nth-child-选择项目"><a href="#7-使用负的-nth-child-选择项目" class="headerlink" title="7. 使用负的 nth-child 选择项目"></a>7. 使用负的 nth-child 选择项目</h3><p>在CSS中使用负的 nth-child 选择项目1到项目n。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* select items 1 through 3 and display them */</span></span><br><span class="line"><span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(-n+3)</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-对图标使用-SVG"><a href="#8-对图标使用-SVG" class="headerlink" title="8. 对图标使用 SVG"></a>8. 对图标使用 SVG</h3><p>我们没有理由不对图标使用SVG：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"logo.svg"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SVG对所有的分辨率类型都具有良好的扩展性，并支持所有浏览器都回归到IE9。这样可以避开.png、.jpg或.gif文件了。</p>
<h3 id="9-优化显示文本"><a href="#9-优化显示文本" class="headerlink" title="9. 优化显示文本"></a>9. 优化显示文本</h3><p>有时，字体并不能在所有设备上都达到最佳的显示，所以可以让设备浏览器来帮助你：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">-moz-osx-font-smoothing</span>: grayscale;</span><br><span class="line">    <span class="attribute">-webkit-font-smoothing</span>: antialiased;</span><br><span class="line">    <span class="attribute">text-rendering</span>: optimizeLegibility;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注：请负责任地使用 optimizeLegibility。此外，IE /Edge没有 text-rendering 支持。</p>
<h3 id="10-对纯-CSS-滑块使用-max-height"><a href="#10-对纯-CSS-滑块使用-max-height" class="headerlink" title="10. 对纯 CSS 滑块使用 max-height"></a>10. 对纯 CSS 滑块使用 max-height</h3><p>使用 max-height 和溢出隐藏来实现只有CSS的滑块：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.slider</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overlow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.slider</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span> ease;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-继承-box-sizing"><a href="#11-继承-box-sizing" class="headerlink" title="11. 继承 box-sizing"></a>11. 继承 box-sizing</h3><p>让 box-sizing 继承 html：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line">*, *<span class="selector-pseudo">:before</span>, *<span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样在插件或杠杆其他行为的其他组件中就能更容易地改变 box-sizing 了。</p>
<h3 id="12-表格单元格等宽"><a href="#12-表格单元格等宽" class="headerlink" title="12. 表格单元格等宽"></a>12. 表格单元格等宽</h3><p>表格工作起来很麻烦，所以务必尽量使用 table-layout: fixed 来保持单元格的等宽：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.calendar</span> &#123;</span><br><span class="line">    <span class="attribute">table-layout</span>: fixed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-用-Flexbox-摆脱外边距的各种-hack"><a href="#13-用-Flexbox-摆脱外边距的各种-hack" class="headerlink" title="13. 用 Flexbox 摆脱外边距的各种 hack"></a>13. 用 Flexbox 摆脱外边距的各种 hack</h3><p>当需要用到列分隔符时，通过flexbox的 space-between 属性，你就可以摆脱nth-，first-，和 last-child 的hack了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list</span> <span class="selector-class">.person</span> &#123;</span><br><span class="line">    <span class="attribute">flex-basis</span>: <span class="number">23%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在，列表分隔符就会在均匀间隔的位置出现。</p>
<h3 id="14-使用属性选择器用于空链接"><a href="#14-使用属性选择器用于空链接" class="headerlink" title="14. 使用属性选择器用于空链接"></a>14. 使用属性选择器用于空链接</h3><p>当a元素没有文本值，但 href 属性有链接的时候显示链接：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">"http"</span>]</span><span class="selector-pseudo">:empty</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(href);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>相当方便。</p>
<h3 id="15-检测鼠标双击"><a href="#15-检测鼠标双击" class="headerlink" title="15. 检测鼠标双击"></a>15. 检测鼠标双击</h3><p>HTML：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">" "</span> <span class="attr">readonly</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://renpingjun.com"</span>&gt;</span>Double click me<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<pre><code>CSS：</code></pre><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.test3</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test3</span> <span class="selector-tag">span</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test3</span> <span class="selector-tag">span</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>, <span class="selector-class">.test3</span> <span class="selector-tag">span</span> <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test3</span> <span class="selector-tag">span</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">101%</span>;  <span class="comment">/* Hacky */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">301%</span>; <span class="comment">/* Hacky */</span></span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.test3</span> <span class="selector-tag">span</span> <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="16-CSS-写出三角形"><a href="#16-CSS-写出三角形" class="headerlink" title="16. CSS 写出三角形"></a>16. CSS 写出三角形</h3><p>/* create an arrow that points up */</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-class">.arrow-up</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">border-left</span>:<span class="number">5px</span> solid transparent;  <span class="comment">/* left arrow slant */</span></span><br><span class="line">    <span class="attribute">border-right</span>:<span class="number">5px</span> solid transparent; <span class="comment">/* right arrow slant */</span></span><br><span class="line">    <span class="attribute">border-bottom</span>:<span class="number">5px</span> solid <span class="number">#2f2f2f</span>; <span class="comment">/* bottom, add background color here */</span></span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* create an arrow that points down */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.arrow-down</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">border-left</span>:<span class="number">5px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-right</span>:<span class="number">5px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-top</span>:<span class="number">5px</span> solid <span class="number">#2f2f2f</span>;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* create an arrow that points left */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.arrow-left</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>:<span class="number">5px</span> solid transparent;  <span class="comment">/* left arrow slant */</span></span><br><span class="line">    <span class="attribute">border-top</span>:<span class="number">5px</span> solid transparent; <span class="comment">/* right arrow slant */</span></span><br><span class="line">    <span class="attribute">border-right</span>:<span class="number">5px</span> solid <span class="number">#2f2f2f</span>; <span class="comment">/* bottom, add background color here */</span></span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* create an arrow that points right */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.arrow-right</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>:<span class="number">5px</span> solid transparent;  <span class="comment">/* left arrow slant */</span></span><br><span class="line">    <span class="attribute">border-top</span>:<span class="number">5px</span> solid transparent; <span class="comment">/* right arrow slant */</span></span><br><span class="line">    <span class="attribute">border-left</span>:<span class="number">5px</span> solid <span class="number">#2f2f2f</span>; <span class="comment">/* bottom, add background color here */</span></span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">0px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="17-CSS3-calc-的使用"><a href="#17-CSS3-calc-的使用" class="headerlink" title="17. CSS3 calc() 的使用"></a>17. CSS3 calc() 的使用</h3><p>calc() 用法类似于函数，能够给元素设置动态的值：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* basic calc */</span></span><br><span class="line"><span class="selector-class">.simpleBlock</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">100px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* calc in calc */</span></span><br><span class="line"><span class="selector-class">.complexBlock</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">50%</span> / <span class="number">3</span>);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span> <span class="built_in">calc</span>(<span class="number">3%</span> - <span class="number">2px</span>);</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="built_in">calc</span>(<span class="number">10%</span> + <span class="number">10px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="18-文本渐变"><a href="#18-文本渐变" class="headerlink" title="18. 文本渐变"></a>18. 文本渐变</h3><p>文本渐变效果很流行，使用 CSS3 能够很简单就实现：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h2</span><span class="selector-attr">[data-text]</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span><span class="selector-attr">[data-text]</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(data-text);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#e3e3e3</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-webkit-mask-image</span>: <span class="built_in">-webkit-gradient</span>(linear, left top, left bottom, from(rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)), <span class="built_in">color-stop</span>(<span class="number">50%</span>, rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>)), <span class="built_in">to</span>(rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="19-禁用鼠标事件"><a href="#19-禁用鼠标事件" class="headerlink" title="19. 禁用鼠标事件"></a>19. 禁用鼠标事件</h3><p>CSS3 新增的 pointer-events 让你能够禁用元素的鼠标事件，例如，一个连接如果设置了下面的样式就无法点击了。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.disabled</span> &#123; <span class="attribute">pointer-events</span>: none; &#125;</span><br></pre></td></tr></table></figure>
<h3 id="20-模糊文本"><a href="#20-模糊文本" class="headerlink" title="20. 模糊文本"></a>20. 模糊文本</h3><p>简单但很漂亮的文本模糊效果，简单又好看！</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.blur</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: transparent;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/css%E6%8A%80%E5%B7%A7/" data-id="ckce3h01l000eoki2e2vygroe" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/css/" rel="tag">css</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-滚动条样式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%A0%B7%E5%BC%8F/" class="article-date">
  <time datetime="2020-06-28T07:44:49.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%A0%B7%E5%BC%8F/">滚动条样式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="滚动条样式"><a href="#滚动条样式" class="headerlink" title="滚动条样式"></a>滚动条样式</h3><h4 id="html5为input添加了原生的占位符属性placeholder，高级浏览器都支持这个属性，例如："><a href="#html5为input添加了原生的占位符属性placeholder，高级浏览器都支持这个属性，例如：" class="headerlink" title="html5为input添加了原生的占位符属性placeholder，高级浏览器都支持这个属性，例如："></a>html5为input添加了原生的占位符属性placeholder，高级浏览器都支持这个属性，例如：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"搜索"</span> <span class="attr">value</span>=<span class="string">" "</span>&gt;</span></span><br></pre></td></tr></table></figure>
<pre><code>&gt; 默认的placeholder字体颜色是呈浅灰色，如果想改变这个默认颜色，解决方案如下：

&gt; -moz代表firefox浏览器私有属性，-ms代表ie浏览器私有属性，-webkit代表safari、chrome私有属性。</code></pre><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:-moz-placeholder</span>,</span><br><span class="line"><span class="selector-tag">textarea</span><span class="selector-pseudo">:-moz-placeholder</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">:-ms-input-placeholder</span>,</span><br><span class="line"><span class="selector-tag">textarea</span><span class="selector-pseudo">:-ms-input-placeholder</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-pseudo">::-webkit-input-placeholder</span>,</span><br><span class="line"><span class="selector-tag">textarea</span><span class="selector-pseudo">::-webkit-input-placeholder</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#999999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>改变滚动条样式：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-track-piece</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#F1F2F4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#aaa</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">800px</span>) &#123;</span><br><span class="line">  <span class="comment">/* 浏览器滚动条样式 */</span></span><br><span class="line">  *<span class="selector-pseudo">::-webkit-scrollbar</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">    <span class="attribute">background-color</span>:white;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>:<span class="number">2px</span> <span class="number">2px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">2</span>) inset;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-pseudo">::-webkit-scrollbar-thumb</span>&#123;</span><br><span class="line">    <span class="attribute">border-radius</span>:<span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">background</span>:<span class="built_in">rgba</span>(<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>:<span class="number">2px</span> <span class="number">2px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>),</span><br><span class="line">                      inset -<span class="number">2px</span> <span class="number">2px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">204</span>,<span class="number">204</span>,<span class="number">204</span>,<span class="number">0.1</span>),</span><br><span class="line">                      inset <span class="number">2px</span> -<span class="number">2px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%A0%B7%E5%BC%8F/" data-id="ckce3h01i0007oki2aclz55js" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/css/" rel="tag">css</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-强制不是用兼容模式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/%E5%BC%BA%E5%88%B6%E4%B8%8D%E6%98%AF%E7%94%A8%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time datetime="2020-06-28T07:43:18.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/%E5%BC%BA%E5%88%B6%E4%B8%8D%E6%98%AF%E7%94%A8%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F/">强制不是用兼容模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>​        在IE8浏览器以后版本，都有一个“兼容性视图”，让不少新技术无法使用。那么如何禁止浏览器自动选择“兼容性视图”，强制IE以最高级别的可用模式显示内容呢？下面就介绍一段HTML代码。</p>
<p>​        X-UA-Compatible是一个设置IE浏览器兼容模式的属性，在IE8浏览器之后诞生。IE8或者IE9有很多种模式，比如，IE8有4种模式：IE5.5怪异模式、IE7标准模式、IE8几乎标准模式、IE8标准模式；而IE9有7种模式: IE5.5怪异模式、IE7标准模式、IE8几乎标准模式、IE8标准模式、IE9几乎标准模式、IE9标准模式、XML模式。</p>
<p>我们常使用代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=8"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>​        来开启IE8的标准渲染模式。这种方式在只存在IE8浏览器的时候比较合适，但是后来又出现了IE9、IE10、IE11等等。我们就可以这样写：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=9;IE=8;IE=7;"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>​        意思就是优先最前面的IE9，没IE9就用IE8。那么如果针对每一种都写一遍，似乎就有些冗余了。</p>
<p>所以我们改变方式采用代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"edge"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>​        Edge模式通知IE以最高级别的可用模式显示内容，这实际上破坏了“锁定”模式。</p>
<p>当然，我们还见过这样的代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>​        就是增加了chrome=1值，目的是触发Google Chrome Frame，不过现在Google已经抛弃Google Chrome Frame了，因此也不用这样写了。</p>
<p>总结：</p>
<p>在 <!DOCTYPE html> 下，使用代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"edge"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>触发标准模式，这个是最有效的方法</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/%E5%BC%BA%E5%88%B6%E4%B8%8D%E6%98%AF%E7%94%A8%E5%85%BC%E5%AE%B9%E6%A8%A1%E5%BC%8F/" data-id="ckce3h01h0006oki298w722rn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/html/" rel="tag">html</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-textarea自适应问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/textarea%E8%87%AA%E9%80%82%E5%BA%94%E9%97%AE%E9%A2%98/" class="article-date">
  <time datetime="2020-06-28T07:41:10.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/textarea%E8%87%AA%E9%80%82%E5%BA%94%E9%97%AE%E9%A2%98/">textarea自适应问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>方法一: </p>
<p>在div行内加上这个属性就可以编辑    ios 要加上-webkit-user-select: text;样式不然无法使用<br>contenteditable = “true”</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>document.selection 的 createRange<span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.input</span>&#123;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">width</span><span class="selector-pseudo">:200px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">min-height</span><span class="selector-pseudo">:24px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">font-size</span><span class="selector-pseudo">:14px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">padding</span><span class="selector-pseudo">:5px</span> 8<span class="selector-tag">px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">border</span><span class="selector-pseudo">:1px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ddd</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.input</span><span class="selector-pseudo">:empty</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">      content: attr(placeholder);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'input'</span> <span class="attr">contenteditable</span> <span class="attr">placeholder</span>=<span class="string">'请输入文字'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>方法二</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">textarea</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"textarea"</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">placeholder</span>=<span class="string">"回复内容"</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">row</span>=<span class="string">"1"</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">"resize: none height: 24px overflow-y: hidden padding: 4px"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="javascript"><span class="keyword">var</span> text = <span class="built_in">document</span>.getElementById(<span class="string">"textarea"</span>)</span></span><br><span class="line"><span class="actionscript">autoTextarea(text)<span class="comment">// 调用</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// textarea 标签自适应</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">autoTextarea</span> (<span class="params">elem, extra, maxHeight</span>) </span>&#123;</span><br><span class="line">  extra = extra || <span class="number">0</span></span><br><span class="line">  <span class="keyword">var</span> isFirefox = !!<span class="built_in">document</span>.getBoxObjectFor || <span class="string">'mozInnerScreenX'</span> <span class="keyword">in</span> <span class="built_in">window</span></span><br><span class="line">  <span class="keyword">var</span> isOpera = !!<span class="built_in">window</span>.opera &amp;&amp; !!<span class="built_in">window</span>.opera.toString().indexOf(<span class="string">'Opera'</span>)</span><br><span class="line">  <span class="keyword">var</span> addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">type, callback</span>) </span>&#123;</span><br><span class="line">    elem.addEventListener </span><br><span class="line">    ? elem.addEventListener(type, callback, <span class="literal">false</span>) </span><br><span class="line">    : elem.attachEvent(<span class="string">'on'</span> + type, callback)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> getStyle = elem.currentStyle ? <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> val = elem.currentStyle[name]</span><br><span class="line">    <span class="keyword">if</span> (name === <span class="string">'height'</span> &amp;&amp; val.search(<span class="regexp">/px/i</span>) !== <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> rect = elem.getBoundingClientRect()</span><br><span class="line">      <span class="keyword">return</span> rect.bottom - rect.top -</span><br><span class="line">              <span class="built_in">parseFloat</span>(getStyle(<span class="string">'paddingTop'</span>)) -</span><br><span class="line">              <span class="built_in">parseFloat</span>(getStyle(<span class="string">'paddingBottom'</span>)) + <span class="string">'px'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> val</span><br><span class="line">  &#125; : <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> getComputedStyle(elem, <span class="literal">null</span>)[name]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> minHeight = <span class="built_in">parseFloat</span>(getStyle(<span class="string">'height'</span>))</span><br><span class="line">  elem.style.resize = <span class="string">'none'</span></span><br><span class="line">  <span class="keyword">var</span> change = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> scrollTop</span><br><span class="line">    <span class="keyword">var</span> height</span><br><span class="line">    <span class="keyword">var</span> padding = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> style = elem.style</span><br><span class="line">    <span class="keyword">if</span> (elem._length === elem.value.length) <span class="keyword">return</span></span><br><span class="line">    elem._length = elem.value.length</span><br><span class="line">    <span class="keyword">if</span> (!isFirefox &amp;&amp; !isOpera) &#123;</span><br><span class="line">      padding = <span class="built_in">parseInt</span>(getStyle(<span class="string">'paddingTop'</span>)) + <span class="built_in">parseInt</span>(getStyle(<span class="string">'paddingBottom'</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    scrollTop = <span class="built_in">document</span>.body.scrollTop || <span class="built_in">document</span>.documentElement.scrollTop</span><br><span class="line">    elem.style.height = minHeight + <span class="string">'px'</span></span><br><span class="line">    <span class="keyword">if</span> (elem.scrollHeight &gt; minHeight) &#123;</span><br><span class="line">      <span class="keyword">if</span> (maxHeight &amp;&amp; elem.scrollHeight &gt; maxHeight) &#123;</span><br><span class="line">        height = maxHeight - padding</span><br><span class="line">        style.overflowY = <span class="string">'auto'</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        height = elem.scrollHeight - padding</span><br><span class="line">        style.overflowY = <span class="string">'hidden'</span></span><br><span class="line">      &#125;</span><br><span class="line">      style.height = height + extra + <span class="string">'px'</span></span><br><span class="line">      scrollTop += <span class="built_in">parseInt</span>(style.height) - elem.currHeight</span><br><span class="line">      <span class="built_in">document</span>.body.scrollTop = scrollTop</span><br><span class="line">      <span class="built_in">document</span>.documentElement.scrollTop = scrollTop</span><br><span class="line">      elem.currHeight = <span class="built_in">parseInt</span>(style.height)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  addEvent(<span class="string">'propertychange'</span>, change)</span><br><span class="line">  addEvent(<span class="string">'input'</span>, change)</span><br><span class="line">  addEvent(<span class="string">'focus'</span>, change)</span><br><span class="line">  change()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/textarea%E8%87%AA%E9%80%82%E5%BA%94%E9%97%AE%E9%A2%98/" data-id="ckce3h0120000oki25uqy93mb" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/html/" rel="tag">html</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-输入框属性" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/%E8%BE%93%E5%85%A5%E6%A1%86%E5%B1%9E%E6%80%A7/" class="article-date">
  <time datetime="2020-06-28T07:39:06.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/%E8%BE%93%E5%85%A5%E6%A1%86%E5%B1%9E%E6%80%A7/">输入框属性</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="输入框"><a href="#输入框" class="headerlink" title="输入框"></a>输入框</h3><pre><code>禁止复制:oncopy=”return false”
禁止粘贴:onpaste=”return false”
禁止剪切:oncut=”return false”
禁止右键弹出:oncontextmenu=”return false”
关闭自动完成功能（缓存）:autocomplete=”off”
自动获得焦点：autofocus=”autofocus”
禁用自动更正:autocorrect=”off”
来关闭键盘默认首字母大写(移动端)：autocapitalize=”off”
不对元素的文本进行拼写检查：spellcheck=”false”</code></pre><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">onpaste</span>=<span class="string">"return false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">oncontextmenu</span>=<span class="string">"return false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">oncopy</span>=<span class="string">"return false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">oncut</span>=<span class="string">"return false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autocomplete</span>=<span class="string">"off"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autocorrect</span>=<span class="string">"off"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autocapitalize</span>=<span class="string">"off"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">spellcheck</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autofocus</span>=<span class="string">"autofocus"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/%E8%BE%93%E5%85%A5%E6%A1%86%E5%B1%9E%E6%80%A7/" data-id="ckce3h01k000coki2eq0zednq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/html/" rel="tag">html</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-http汇总" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/http%E6%B1%87%E6%80%BB/" class="article-date">
  <time datetime="2020-06-28T07:19:08.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/http%E6%B1%87%E6%80%BB/">http汇总</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="什么是-HTTP："><a href="#什么是-HTTP：" class="headerlink" title="什么是 HTTP："></a>什么是 HTTP：</h3><p>HTTP(HyperText Transfer Protocol 超文本传输协议)是互联网上应用最为广泛的一种网络协议。所有的 WWW 文件都必须遵守这个标准,为了提供一种发布和接收 HTML 页面的方法。HTTP 定义了信息如何被格式化、如何被传输，以及在各种命令下服务器和浏览器所采取的响应。</p>
<p>HTTP 是客户端浏览器或其他程序与 Web 服务器之间的应用层通信协议。在 Internet 上的 Web 服务器上存放的都是超文本信息，客户机需要通过 HTTP 协议传输所要访问的超文本信息。HTTP 包含命令和传输信息，不仅可用于 Web 访问，也可以用于其他因特网/内联网应用系统之间的通信，从而实现各类应用资源超媒体访问的集成。</p>
<p>关于 HTTP 协议的详细内容请参考 RFC2616。</p>
<h3 id="HTTP-协议的主要特点"><a href="#HTTP-协议的主要特点" class="headerlink" title="HTTP 协议的主要特点"></a>HTTP 协议的主要特点</h3><p><strong>1.支持客户/服务器模式。</strong><br><strong>2.简单快速：</strong> 客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有 GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于 HTTP 协议简单，使得 HTTP 服务器的程序规模小，因而通信速度很快。<br><strong>3.灵活：</strong> HTTP 允许传输任意类型的数据对象。正在传输的类型由 Content-Type 加以标记。<br><strong>4.无连接：</strong> 无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。<br><strong>5.无状态：</strong> HTTP 协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。</p>
<h3 id="技术架构："><a href="#技术架构：" class="headerlink" title="技术架构："></a>技术架构：</h3><p>HTTP 是一个客户端和服务器端请求和应答的标准（TCP）。客户端是终端用户，服务器端是网站。通过使用 Web 浏览器、网络爬虫或者其它的工具，客户端发起一个到服务器上指定端口（默认端口为 80）的 HTTP 请求。（我们称这个客户端）叫用户代理（user agent）。应答的服务器上存储着（一些）资源，比如 HTML 文件和图像。（我们称）这个应答服务器为源服务器（origin server）。在用户代理和源服务器中间可能存在多个中间层，比如代理，网关，或者隧道（tunnels）。尽管 TCP/IP 协议是互联网上最流行的应用，HTTP 协议并没有规定必须使用它和（基于）它支持的层。 事实上，HTTP 可以在任何其他互联网协议上，或者在其他网络上实现。HTTP 只假定（其下层协议提供）可靠的传输，任何能够提供这种保证的协议都可以被其使用。<br>　　通常，由 HTTP 客户端发起一个请求，建立一个到服务器指定端口（默认是 80 端口）的 TCP 连接。HTTP 服务器则在那个端口监听客户端发送过来的请求。一旦收到请求，服务器（向客户端）发回一个状态行，比如”HTTP/1.1 200 OK”，和（响应的）消息，消息的消息体可能是请求的文件、错误消息、或者其它一些信息。HTTP 使用 TCP 而不是 UDP 的原因在于（打开）一个网页必须传送很多数据，而 TCP 协议提供传输控制，按顺序组织数据，和错误纠正。<br>　　通过 HTTP 或者 HTTPS 协议请求的资源由统一资源标示符（Uniform Resource Identifiers）（或者，更准确一些，URLs）来标识。</p>
<h3 id="工作流程："><a href="#工作流程：" class="headerlink" title="工作流程："></a>工作流程：</h3><p>既然 HTTP 是基于传输层的 TCP 协议，而 TCP 协议是面向连接的端到端的协议。因此，使用 HTTP 协议传输前，首先建立 TCP 连接，就是因此在谈的 TCP 链接过程的“三次握手”。如图</p>
<img src="/blog/2020/06/28/http%E6%B1%87%E6%80%BB/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png" class title="三次握手">

<p>在 Web 上，HTTP 协议使用 TCP 协议而不是 UDP 协议的原因在于一个网页必须传送很多数据，而且保证其完整性。TCP 协议提供传输控制，按顺序组织数据和错误纠正的一系列功能。</p>
<p>一次 HTTP 操作称为一个事务，其工作过程可分为四步：</p>
<p>1、客户端与服务器需要建立连接。（比如某个超级链接，HTTP 就开始了。）<br>2、建立连接后，发送请求。<br>3、服务器接到请求后，响应其响应信息。<br>4、客户端接收服务器所返回的信息通过浏览器显示在用户的显示屏上，然后客户机与服务器断开连接。</p>
<p>建立连接，其实建立在 TCP 连接基础之上。图解核心工作过程（即省去连接过程）如下：</p>
<img src="/blog/2020/06/28/http%E6%B1%87%E6%80%BB/http%E8%AF%B7%E6%B1%82.png" class title="http请求">

<h3 id="关于-HTTP-协议"><a href="#关于-HTTP-协议" class="headerlink" title="关于 HTTP 协议"></a>关于 HTTP 协议</h3><p>HTTP 协议采用了请求/响应模型。客户端向服务器发送一个请求，请求头包含请求的方法、URL、协议版本、以及包含请求修饰符、客户信息和内容的类似于 MIME 的消息结构。服务器以一个状态行作为响应，响应的内容包括消息协议的版本，成功或者错误编码加上包含服务器信息、实体元信息以及可能的实体内容。</p>
<p>通常 HTTP 消息包括客户机向服务器的请求消息和服务器向客户机的响应消息。这两种类型的消息由一个起始行，一个或者多个头域，一个指示头域结束的空行和可选的消息体组成。HTTP 的头域包括通用头，请求头，响应头和实体头四个部分。每个头域由一个域名，冒号（:）和域值三部分组成。域名是大小写无关的，域值前可以添加任何数量的空格符，头域可以被扩展为多行，在每行开始处，使用至少一个空格或制表符。</p>
<h3 id="通用头域："><a href="#通用头域：" class="headerlink" title="通用头域："></a>通用头域：</h3><p>通用头域包含请求和响应消息都支持的头域，通用头域包含 Cache-Control、Connection、Date、Pragma、Transfer-Encoding、Upgrade、Via。对通用头域的扩展要求通讯双方都支持此扩展，如果存在不支持的通用头域，一般将会作为实体头域处理。下面简单介绍几个在 UPnP 消息中使用的通用头域：</p>
<p><strong>1.Cache-Control 头域</strong><br>　　 Cache-Control 指定请求和响应遵循的缓存机制。</p>
<p><strong>2.Date 头域</strong><br>　　 Date 头域表示消息发送的时间，时间的描述格式由 rfc822 定义。</p>
<p><strong>3.Pragma 头域</strong><br>　　 Pragma 头域用来包含实现特定的指令，最常用的是 Pragma:no-cache。</p>
<h3 id="请求消息"><a href="#请求消息" class="headerlink" title="请求消息"></a>请求消息</h3><p>请求消息的第一行为下面的格式：<br>　　 MethodSPRequest-URISPHTTP-VersionCRLFMethod 表示对于 Request-URI 完成的方法，这个字段是大小写敏感的，包括 OPTIONS、GET、HEAD、POST、PUT、DELETE、TRACE。</p>
<p><strong>1.Host 头域</strong><br>　　 Host 头域指定请求资源的 Intenet 主机和端口号，必须表示请求 url 的原始服务器或网关的位置。</p>
<p><strong>2.Referer 头域</strong><br>　　 Referer 头域允许客户端指定请求 uri 的源资源地址，这可以允许服务器生成回退链表，可用来登陆、优化 cache 等。</p>
<p><strong>3.Range 头域</strong><br>　　 Range 头域可以请求实体的一个或者多个子范围。</p>
<p><strong>4.User-Agent 头域</strong><br>　　 User-Agent 头域的内容包含发出请求的用户信息。</p>
<h3 id="响应消息"><a href="#响应消息" class="headerlink" title="响应消息"></a>响应消息</h3><p>响应消息的第一行为下面的格式：<br>　　 HTTP-VersionSPStatus-CodeSPReason-PhraseCRLF<br>　　 HTTP-Version 表示支持的 HTTP 版本，例如为 HTTP/1.1。Status-Code 是一个三个数字的结果代码。Reason-Phrase 给 Status-Code 提供一个简单的文本描述。<br>　　 Status-Code 的第一个数字定义响应的类别，后两个数字没有分类的作用。第一个数字可能取 5 个不同的值：</p>
<p>1xx: 信息响应类，表示接收到请求并且继续处理<br>2xx: 处理成功响应类，表示动作被成功接收、理解和接受<br>3xx: 重定向响应类，为了完成指定的动作，必须接受进一步处理<br>4xx: 客户端错误，客户请求包含语法错误或者是不能正确执行<br>5xx: 服务端错误，服务器不能正确执行一个正确的请求</p>
<p><strong>1.Location 响应头</strong><br>　　 Location 响应头用于重定向接收者到一个新 URI 地址。</p>
<p><strong>2.Server 响应头</strong><br>　　 Server 响应头包含处理请求的原始服务器的软件信息。</p>
<h3 id="实体信息"><a href="#实体信息" class="headerlink" title="实体信息"></a>实体信息</h3><p>请求消息和响应消息都可以包含实体信息，实体信息一般由实体头域和实体组成。实体头域包含关于实体的原信息，实体头包括 Allow、Content-Base、Content-Encoding、Content-Language、Content-Length、Content-Location、Content-MD5、Content-Range、Content-Type、Etag、Expires、Last-Modified、extension-header。extension-header 允许客户端定义新的实体头，但是这些域可能无法被接受方识别。</p>
<p><strong>1.Content-Type 实体头</strong><br>　　 Content-Type 实体头用于向接收方指示实体的介质类型，指定 HEAD 方法送到接收方的实体介质类型，或 GET 方法发送的请求介质类型</p>
<p><strong>2.Content-Range 实体头</strong></p>
<p>Content-Range 实体头用于指定整个实体中的一部分的插入位置，他也指示了整个实体的长度。</p>
<p><strong>3.Last-modified 实体头</strong><br>　　 Last-modified 实体头指定服务器上保存内容的最后修订时间。</p>
<h3 id="报文格式："><a href="#报文格式：" class="headerlink" title="报文格式："></a>报文格式：</h3><p>HTTP 报文由从客户机到服务器的请求和从服务器到客户机的响应构成。请求报文格式如下：</p>
<p><strong>请求行 － 通用信息头 － 请求头 － 实体头 － 报文主体</strong></p>
<p>请求行以方法字段开始，后面分别是 URL 字段和 HTTP 协议版本字段，并以 CRLF 结尾。SP 是分隔符。除了在最后的 CRLF 序列中 CF 和 LF 是必需的之外，其他都可以不要。有关通用信息头，请求头和实体头方面的具体内容可以参照相关文件。</p>
<p>如下：</p>
<img src="/blog/2020/06/28/http%E6%B1%87%E6%80%BB/%E6%8A%A5%E6%96%87.png" class title="报文">

<p>对于其中请求报文详解:<br>　　 <strong>1、请求行</strong><br>　　　　方法字段 + URL + Http 协议版本<br>　　 <strong>2、通用信息头</strong><br>　　　　 Cache-Control 头域：指定请求和响应遵循的缓存机制。<br>　　　　 keep-alive 是其连接持续有效<br>　　 <strong>3、请求头</strong><br>　　　　 Host 头域<br>　　　　 Referer 头域：允许客户端指定请求 URL 的资源地址。<br>　　　　 User-Agent 头域：请求用户信息。【可以看出一些客户端浏览器的内核信息】<br>　　 4、报文主体</p>
<p>应答报文格式如下：<br>　　　　<strong>状态行 － 通用信息头 － 响应头 － 实体头 － 报文主体</strong></p>
<p>状态码元由 3 位数字组成，表示请求是否被理解或被满足。原因分析是对原文的状态码作简短的描述，状态码用来支持自动操作，而原因分析用来供用户使用。客户机无需用来检查或显示语法。有关通用信息头，响应头和实体头方面的具体内容可以参照相关文件。</p>
<img src="/blog/2020/06/28/http%E6%B1%87%E6%80%BB/%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87.png" class title="响应报文">

<p>请求报文相关：</p>
<h3 id="请求行-请求方法"><a href="#请求行-请求方法" class="headerlink" title="请求行-请求方法"></a>请求行-请求方法</h3><p><strong>GET</strong> 请求获取 Request-URI 所标识的资源<br><strong>POST</strong> 在 Request-URI 所标识的资源后附加新的数据<br><strong>HEAD</strong> 请求获取由 Request-URI 所标识的资源的响应消息报头<br><strong>PUT</strong> 请求服务器存储一个资源，并用 Request-URI 作为其标识<br><strong>DELETE</strong> 请求服务器删除 Request-URI 所标识的资源<br><strong>TRACE</strong> 请求服务器回送收到的请求信息，主要用于测试或诊断<br><strong>CONNECT</strong> 保留将来使用<br><strong>OPTIONS</strong> 请求查询服务器的性能，或者查询与资源相关的选项和需求</p>
<h3 id="响应报文相关："><a href="#响应报文相关：" class="headerlink" title="响应报文相关："></a>响应报文相关：</h3><h3 id="响应行-状态码"><a href="#响应行-状态码" class="headerlink" title="响应行-状态码"></a>响应行-状态码</h3><p>HTTP 状态码的作用是：<strong>web 服务器用来告诉客户端，发生了什么事。</strong></p>
<p>状态码位于 HTTP Response 的第一行中，会返回一个”三位数字的状态码“和一个“状态消息”。 ”三位数字的状态码“便于程序进行处理， “状态消息”更便于人理解。</p>
<pre><code>HTTP状态码被分成了五类:
100-199 用于指定客户端应相应的某些动作。
200-299 用于表示请求成功。
300-399 用于已经移动的文件并且常被包含在定位头信息中指定新的地址信息。
400-499 用于指出客户端的错误。
500-599 用于支持服务器错误。</code></pre><p>下面提供 HTTP 状态码的完整列表。</p>
<h3 id="一、临时响应"><a href="#一、临时响应" class="headerlink" title="一、临时响应"></a>一、临时响应</h3><p>100-199(临时响应)</p>
<p>表示临时响应并需要请求者继续执行操作的状态码。</p>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">原因短语</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">100</td>
<td align="left">继续</td>
<td align="left">说明收到了请求的初始部分，请客户端继续发送</td>
</tr>
<tr>
<td align="left">101</td>
<td align="left">切换协议</td>
<td align="left"></td>
</tr>
</tbody></table>
<h3 id="二、成功"><a href="#二、成功" class="headerlink" title="二、成功"></a>二、成功</h3><p>200-299 (成功)</p>
<p>表示成功处理了请求的状态码。</p>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">原因短语</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">200</td>
<td align="left">成功</td>
<td align="left">请求成功</td>
</tr>
<tr>
<td align="left">201</td>
<td align="left">已创建</td>
<td align="left">用于创建服务器对象的请求（比如 put）响应的实体主体部分中应该包含了各种引用了已创建的资源的 URL。服务器必须在发送这个状态码之前创建好对象</td>
</tr>
<tr>
<td align="left">202</td>
<td align="left">已接受</td>
<td align="left">请求已被接收，但服务器还未对其执行任何动作。最终该请求可能会也可能不会被执行。在异步操作的场合下，没有比发送这个状态码更方便的做法了。 返回 202 状态码的响应的目的是允许服务器接受其他过程的请求（例如某个每天只执行一次的基于批处理的操作），而不必让客户端一直保持与服务器的连接直到批处理操作全部完成。</td>
</tr>
<tr>
<td align="left">203</td>
<td align="left">非授权信息</td>
<td align="left">实体首部包含的信息不是来自于源端服务器，而是来自资源的一份副本。</td>
</tr>
<tr>
<td align="left">204</td>
<td align="left">无内容</td>
<td align="left">响应报文中包含若干首部和一个状态行，但没有实体的主体部分</td>
</tr>
<tr>
<td align="left">205</td>
<td align="left">重置内容</td>
<td align="left">负责告知浏览器清除当前页面中所有的 HTML 表单元素</td>
</tr>
<tr>
<td align="left">206</td>
<td align="left">部分内容</td>
<td align="left">服务器成功处理了部分 GET 请求。</td>
</tr>
</tbody></table>
<h3 id="三、重定向"><a href="#三、重定向" class="headerlink" title="三、重定向"></a>三、重定向</h3><p>300-399 (重定向)</p>
<p>要完成请求，需要进一步操作。通常，这些状态码用来重定向。Google 建议您在每次请求中使用重定向不要超过 5 次。您可以使用网站管理员工具查看一下 Googlebot 在抓取重定向网页时是否遇到问题。诊断下的网络抓取页列出了由于重定向错误导致 Googlebot 无法抓取的网址。</p>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">原因短语</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">300</td>
<td align="left">多种选择</td>
<td align="left">客户端请求一个实际指向多个资源的 URL 时会返回这个状态码，比如服务器上有某个 HTML 文档的英语和法语版本。返回这个代码时会带有一个选项列表，这样用户就可以选择他希望使用的那一项。</td>
</tr>
<tr>
<td align="left">301</td>
<td align="left">永久移动</td>
<td align="left">被请求的资源已永久移动到新位置，在请求的 URL 已被移除时使用。响应的 location 首部中应该包含资源现在所处的 URL</td>
</tr>
<tr>
<td align="left">302</td>
<td align="left">临时移动</td>
<td align="left">请求的资源现在临时从不同的 URI 响应请求。</td>
</tr>
<tr>
<td align="left">303</td>
<td align="left">查看其他位置</td>
<td align="left">告知客户端应该用另一个 URL 来获取资源。新的 URL 位于响应报文的 location 首部。其主要目的是允许 post 请求的响应将客户端定向到某个资源上去</td>
</tr>
<tr>
<td align="left">304</td>
<td align="left">未修改</td>
<td align="left">如果客户端发送了一个带条件的 GET 请求且该请求已被允许，而文档的内容（自上次访问以来或者根据请求的条件）并没有改变，则服务器应当返回这个状态码。</td>
</tr>
<tr>
<td align="left">305</td>
<td align="left">使用代理</td>
<td align="left">用来说明必须使用一个代理来访问资源，代理的位置由 location 首部给出。</td>
</tr>
<tr>
<td align="left">307</td>
<td align="left">临时重定向</td>
<td align="left">请求的资源现在临时从不同的 URI 响应请求。由于这样的重定向是临时的，客户端应当继续向原有地址发送以后的请求.只有在 Cache-Control 或 Expires 中进行了指定的情况下，这个响应才是可缓存的。</td>
</tr>
</tbody></table>
<h3 id="四、请求错误"><a href="#四、请求错误" class="headerlink" title="四、请求错误"></a>四、请求错误</h3><p>400-499 (请求错误)</p>
<p>这些状态码表示请求可能出错，妨碍了服务器的处理。</p>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">原因短语</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">400</td>
<td align="left">错误请求</td>
<td align="left">用于告知客户端它发送了一个错误的请求</td>
</tr>
<tr>
<td align="left">401</td>
<td align="left">未授权</td>
<td align="left">当前请求需要用户验证。该响应必须包含一个适用于被请求资源的 WWW-Authenticate 信息头用以询问用户信息。客户端可以重复提交一个包含恰当的 Authorization 头信息的请求。如果当前请求已经包含了 Authorization 证书，那么 401 响应代表着服务器验证</td>
</tr>
<tr>
<td align="left">403</td>
<td align="left">禁止</td>
<td align="left">服务器已经理解请求，但是拒绝执行它。如果服务器想说明拒绝原因，可以在包含实体的主体部分来对原因进行描述。但这个状态码通常在服务器不想说明拒绝原因时使用</td>
</tr>
<tr>
<td align="left">404</td>
<td align="left">未找到</td>
<td align="left">无法找到指定位置的资源。</td>
</tr>
<tr>
<td align="left">405</td>
<td align="left">方法禁用</td>
<td align="left">请求方法（GET、POST、HEAD、DELETE、PUT、TRACE 等）对指定的资源不适用。</td>
</tr>
<tr>
<td align="left">406</td>
<td align="left">不接受</td>
<td align="left">表示请求资源的 MIME 类型与客户端中 Accept 头信息中指定的类型不一致。</td>
</tr>
<tr>
<td align="left">407</td>
<td align="left">需要代理授权</td>
<td align="left">此状态码与 401(未授权)类似，但指定请求者应当授权使用代理。如果服务器返回此响应，还表示请求者应当使用代理。</td>
</tr>
<tr>
<td align="left">408</td>
<td align="left">请求超时</td>
<td align="left">请求超时</td>
</tr>
</tbody></table>
<h3 id="五、服务器错误"><a href="#五、服务器错误" class="headerlink" title="五、服务器错误"></a>五、服务器错误</h3><p>500-599(服务器错误)</p>
<p>这些状态码表示服务器在处理请求时发生内部错误。这些错误可能是服务器本身的错误，而不是请求出错。</p>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">原因短语</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">500</td>
<td align="left">服务器内部错误</td>
<td align="left">服务器遇到一个妨碍它为请求提供服务的错误时，使用此状态码。该状态经常由 CGI 程序引起也可能（但愿不会如此！）由无法正常运行的或返回头信息格式不正确的 servlet 引起。</td>
</tr>
<tr>
<td align="left">501</td>
<td align="left">尚未实施</td>
<td align="left">客户端使用了服务器未实现的请求方法</td>
</tr>
<tr>
<td align="left">502</td>
<td align="left">错误网关</td>
<td align="left">服务器作为网关或者代理时，为了完成请求访问下一个服务器，但该服务器返回了非法的应答。</td>
</tr>
<tr>
<td align="left">503</td>
<td align="left">服务不可用</td>
<td align="left">用于说明服务器现在无法为请求提供服务。但将来可以，服务器可提供一个 Retry-After 头信息告诉客户端什么时候资源可用。</td>
</tr>
<tr>
<td align="left">504</td>
<td align="left">网关超时</td>
<td align="left">该状态也用于充当代理或网关的服务器；它指出接收服务器没有从远端服务器得到及时的响应。</td>
</tr>
<tr>
<td align="left">505</td>
<td align="left">HTTP 版本不受支持</td>
<td align="left">服务器不支持在请求中所标明 HTTP 版本。</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/http%E6%B1%87%E6%80%BB/" data-id="ckce3h023000poki2e4vh11g1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/http/" rel="tag">http</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-自动化引入组件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2020/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BC%95%E5%85%A5%E7%BB%84%E4%BB%B6/" class="article-date">
  <time datetime="2020-06-28T07:08:11.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2020/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BC%95%E5%85%A5%E7%BB%84%E4%BB%B6/">自动化引入组件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在使用vue开发需求中，组件化一直是我们开发的理念，在公共组件的引入或者局部组件的引入过程中，不免需要新建一个组件就要去引入一下，这让人感觉繁琐，依赖于require.context(),我们可以省去挨个引入的时间和精力。</p>
<h3 id="require-context"><a href="#require-context" class="headerlink" title="require.context()"></a>require.context()</h3><p>它允许您传入要搜索的目录、指示是否也应该搜索子目录的标志以及匹配文件的正则表达式。<br>require.context() 方法有 3 个参数：</p>
<ul>
<li>要搜索的文件夹目录</li>
<li>是否还应该搜索它的子目录，</li>
<li>以及一个匹配文件的正则表达式。</li>
</ul>
<p>语法如下:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>.context(directory, useSubdirectories = <span class="literal">false</span>, regExp = <span class="regexp">/^\.\//</span>)</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  它会找到当前目录下test文件夹内的以.test.js结尾的文件</span></span><br><span class="line"><span class="built_in">require</span>.context(<span class="string">"./test"</span>, <span class="literal">false</span>, /\.test\.js$/);</span><br></pre></td></tr></table></figure>
<p>如果你想要一个目录中的所有文件或匹配一个模式，这是很有用的，例如:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">importAll</span> (<span class="params">r</span>) </span>&#123;</span><br><span class="line">  r.keys().forEach(r);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">importAll(<span class="built_in">require</span>.context(<span class="string">'../components/'</span>, <span class="literal">true</span>, /\.js$/));</span><br></pre></td></tr></table></figure>


<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><h4 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h4><p>比如，现在我想在一个vue文件内动态引入多个组件，全局注册的话也可以使用这个方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">let</span> coms = <span class="built_in">require</span>.context(<span class="string">'./com'</span>, <span class="literal">false</span>, /\.vue$/)</span><br><span class="line"><span class="keyword">let</span> comList = [] <span class="comment">// 存放组件信息</span></span><br><span class="line">coms.keys().forEach(<span class="function"><span class="params">path</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> reqCom = coms(path) <span class="comment">// 获取每个组件</span></span><br><span class="line">  <span class="keyword">const</span> name = path.split(<span class="string">'/'</span>)[<span class="number">1</span>].split(<span class="string">'.'</span>)[<span class="number">0</span>] <span class="comment">// 获取组件名称</span></span><br><span class="line">  Vue.component(name, reqCom.default || reqCom) <span class="comment">// 挂载组件</span></span><br><span class="line">  comList.push(&#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>全局注册公共组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> coms = <span class="built_in">require</span>.context(<span class="string">'./'</span>, <span class="literal">true</span>, /\.vue$/)</span><br><span class="line"><span class="keyword">const</span> install = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  coms.keys().forEach(<span class="function"><span class="params">path</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> instance = coms(path)</span><br><span class="line">    <span class="keyword">let</span> name = path.split(<span class="string">'/'</span>)[<span class="number">1</span>].split(<span class="string">'.'</span>)[<span class="number">0</span>]</span><br><span class="line">    Vue.component(name, instance.default || instance)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用install 属性名</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  install</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 然后在入口文件引入</span></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> cUi <span class="keyword">from</span> <span class="string">'./components/index.js'</span></span><br><span class="line">Vue.use(cUi)</span><br></pre></td></tr></table></figure>

<h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><p>配置路由也可以使用require.context</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line">Vue.use(Router)</span><br><span class="line"><span class="comment">// 重写push方法, 避免跳到同一页面报错</span></span><br><span class="line"><span class="keyword">const</span> routerPush = Router.prototype.push</span><br><span class="line">Router.prototype.push = <span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">location</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> routerPush.call(<span class="keyword">this</span>, location).catch(<span class="function"><span class="params">error</span>=&gt;</span> error)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: <span class="string">'主页'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    name: <span class="string">'index'</span>,</span><br><span class="line">    redirect: <span class="string">'/home'</span>,</span><br><span class="line">    component: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'@/pages/home.vue'</span>], resolve)</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="comment">// 动态引入</span></span><br><span class="line"><span class="keyword">let</span> coms = <span class="built_in">require</span>.context(<span class="string">'../pages'</span>, <span class="literal">true</span>, /\.vue$/)</span><br><span class="line">coms.keys().forEach(<span class="function"><span class="params">path</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> reqCom = coms(path) <span class="comment">// 获取每个组件</span></span><br><span class="line">  <span class="keyword">const</span> name = path.split(<span class="string">'/'</span>)[<span class="number">1</span>].split(<span class="string">'.'</span>)[<span class="number">0</span>] <span class="comment">// 获取组件名称</span></span><br><span class="line">  routes.push(&#123;</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: reqCom.default.pageName || name</span><br><span class="line">    &#125;,</span><br><span class="line">    path: <span class="string">`/<span class="subst">$&#123;name&#125;</span>`</span>,</span><br><span class="line">    name,</span><br><span class="line">    component: reqCom.default || reqCom</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>


<h2 id="vue-自动化引入"><a href="#vue-自动化引入" class="headerlink" title="vue 自动化引入"></a>vue 自动化引入</h2><h3 id="require-context-1"><a href="#require-context-1" class="headerlink" title="require.context"></a>require.context</h3><p>一个 webpack 的 api,通过执行 require.context 函数获取一个特定的上下文,主要用来实现自动化导入模块,在前端工程中,如果遇到从一个文件夹引入很多模块的情况,可以使用这个 api,它会遍历文件夹中的指定文件,然后自动导入,使得不需要每次显式的调用 import 导入模块</p>
<blockquote>
<p>require.context() 方法来创建自己的（模块）上下文，这个方法有 3 个参数：</p>
<ul>
<li>要搜索的文件夹目录</li>
<li>是否还应该搜索它的子目录，</li>
<li>以及一个匹配文件的正则表达式。</li>
</ul>
</blockquote>
<h3 id="使用-require-context-全局引入自定义组件"><a href="#使用-require-context-全局引入自定义组件" class="headerlink" title="使用 require.context 全局引入自定义组件"></a>使用 require.context 全局引入自定义组件</h3><p>如果项目中有使用很频繁的组件，我们可以通过全局引入的方式，我们可以在组件文件夹中新建一个文件夹 common 用来存放全局组件，在里面新建一个 index.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeStr</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.charAt(<span class="number">0</span>).toUpperCase() + str.slice(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> requireComponent = <span class="built_in">require</span>.context(<span class="string">'.'</span>, <span class="literal">false</span>, /\.vue$/); <span class="comment">// false 不遍历子目录，true遍历子目录</span></span><br><span class="line"></span><br><span class="line">requireComponent.keys().forEach(<span class="function"><span class="params">fileName</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> config = requireComponent(fileName);</span><br><span class="line">  <span class="keyword">const</span> componentName = changeStr(</span><br><span class="line">    fileName.replace(<span class="regexp">/^\.\//</span>, <span class="string">''</span>).replace(<span class="regexp">/\.\w+$/</span>, <span class="string">''</span>)</span><br><span class="line">  );</span><br><span class="line">  Vue.component(componentName, config.default || config);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>然后在入口文件引入该文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'@/components/common'</span>;</span><br></pre></td></tr></table></figure>

<p>这样我们就可以在 common 的文件夹内，新建各种组件，index.js 就可以自动引入（不用每新增一个组件就去引入），就可以在其他地方使用组件了。</p>
<h2 id="使用-require-context-动态引入路由"><a href="#使用-require-context-动态引入路由" class="headerlink" title="使用 require.context 动态引入路由"></a>使用 require.context 动态引入路由</h2><p>在路由文件夹内的 index.js，我们有这么一段代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routerList = []; <span class="comment">//用来存放引入的地址</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">importAll</span>(<span class="params">r</span>) </span>&#123;</span><br><span class="line">  r.keys().forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    routerList.push(r(key).default);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">importAll(<span class="built_in">require</span>.context(<span class="string">'.'</span>, <span class="literal">true</span>, /\.routes\.js/));</span><br></pre></td></tr></table></figure>

<p>这样我们就可以在，路由文件夹内新建各种带.routes.js 后缀的文件，分模块来新建，比如新建个 home.routes.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  path: <span class="string">'/home'</span>,</span><br><span class="line">  name: <span class="string">'home'</span>,</span><br><span class="line">  redirect: <span class="string">'/home/tree_table'</span>,</span><br><span class="line">  component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/index.vue'</span>),</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'tree_table'</span>,</span><br><span class="line">      name: <span class="string">'tree_table'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/treeTable.vue'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'merge_table'</span>,</span><br><span class="line">      name: <span class="string">'merge_table'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/mergeTable.vue'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'is_com'</span>,</span><br><span class="line">      name: <span class="string">'is_com'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/is.vue'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'model_com'</span>,</span><br><span class="line">      name: <span class="string">'model_com'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/modelCom.vue'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'plugin_betterScroll'</span>,</span><br><span class="line">      name: <span class="string">'pluginBetterScroll'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/plugin/betterScroll.vue'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'form'</span>,</span><br><span class="line">      name: <span class="string">'form'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/form/index.vue'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'text_editor'</span>,</span><br><span class="line">      name: <span class="string">'text_editor'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/textEditor.vue'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'quill_editor'</span>,</span><br><span class="line">      name: <span class="string">'quill_editor'</span>,</span><br><span class="line">      component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/quillEditor.vue'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>然后在 index.js 中使用即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Router);</span><br><span class="line"><span class="keyword">const</span> routerList = [];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">importAll</span>(<span class="params">r</span>) </span>&#123;</span><br><span class="line">  r.keys().forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    routerList.push(r(key).default);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">importAll(<span class="built_in">require</span>.context(<span class="string">'.'</span>, <span class="literal">true</span>, /\.routes\.js/));</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      redirect: <span class="string">'/home'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    ...routerList</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shetia.github.io/blog/2020/06/28/%E8%87%AA%E5%8A%A8%E5%8C%96%E5%BC%95%E5%85%A5%E7%BB%84%E4%BB%B6/" data-id="ckce3h01j0009oki24gu4dh8i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><a class="extend next" rel="next" href="/blog/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/html/" rel="tag">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/vue/" rel="tag">vue</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/css/" style="font-size: 15px;">css</a> <a href="/blog/tags/html/" style="font-size: 20px;">html</a> <a href="/blog/tags/http/" style="font-size: 10px;">http</a> <a href="/blog/tags/js/" style="font-size: 15px;">js</a> <a href="/blog/tags/vue/" style="font-size: 20px;">vue</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/06/">六月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2020/07/08/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/">快速排序</a>
          </li>
        
          <li>
            <a href="/blog/2020/06/28/vue%E7%BB%84%E4%BB%B6%E5%8F%91%E5%B8%83npm/">vue组件发布npm</a>
          </li>
        
          <li>
            <a href="/blog/2020/06/28/%E6%9F%AF%E9%87%8C%E5%8C%96/">柯里化</a>
          </li>
        
          <li>
            <a href="/blog/2020/06/28/css%E6%8A%80%E5%B7%A7/">css技巧</a>
          </li>
        
          <li>
            <a href="/blog/2020/06/28/%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%A0%B7%E5%BC%8F/">滚动条样式</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 shetia<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">主页</a>
  
    <a href="/blog/archives" class="mobile-nav-link">档案</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">

  
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>




<script src="/blog/js/script.js"></script>




  </div>
</body>
</html>